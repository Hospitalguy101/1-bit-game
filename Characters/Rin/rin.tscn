[gd_scene load_steps=36 format=3 uid="uid://dwrvf7esucege"]

[ext_resource type="PackedScene" uid="uid://cj5yffxhnvcji" path="res://Characters/base_character.tscn" id="1_voviw"]
[ext_resource type="Script" path="res://Characters/Rin/rin.gd" id="2_f2mt2"]
[ext_resource type="Texture2D" uid="uid://dmmv2d5msgxbx" path="res://Characters/Rin/rin.png" id="3_jm4h2"]
[ext_resource type="PackedScene" uid="uid://dog8xpvpd4vek" path="res://Characters/Rin/rin_anim_player.tscn" id="4_lxsc4"]
[ext_resource type="PackedScene" uid="uid://bhla3lmhp48cb" path="res://Characters/Rin/portal.tscn" id="5_i85mh"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_q86cr"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wjjwv"]
size = Vector2(18, 18)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_df755"]
animation = &"Crouch"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5d1hf"]
animation = &"Flutter"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pdlhp"]
animation = &"Grab"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1crr2"]
animation = &"Grab"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fmmdf"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_owrdw"]
animation = &"Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7w07r"]
animation = &"Walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fb8y7"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b12uv"]
advance_mode = 2
advance_condition = &"is_walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xjab4"]
advance_mode = 2
advance_condition = &"is_idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5kqia"]
advance_mode = 2
advance_condition = &"grab"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uc2tw"]
switch_mode = 2
advance_mode = 2
advance_condition = &"is_idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6kt2q"]
advance_mode = 2
advance_condition = &"grab"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fjeki"]
switch_mode = 2
advance_mode = 2
advance_condition = &"is_walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4jfp8"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bhmlc"]
advance_mode = 2
advance_condition = &"jump"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0nnf1"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ahdbi"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vcl7x"]
advance_mode = 2
advance_condition = &"is_crouching"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bylqf"]
advance_mode = 2
advance_condition = &"is_crouching"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ohols"]
advance_mode = 2
advance_condition = &"is_not_crouched"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hiwtq"]
advance_mode = 2
advance_condition = &"is_not_crouching"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6s5jw"]
advance_mode = 2
advance_condition = &"is_guarding"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_26i6v"]
advance_mode = 2
advance_condition = &"is_guarding"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mqjqs"]
advance_mode = 2
advance_condition = &"is_not_guarding"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ldc2f"]
advance_mode = 2
advance_condition = &"is_not_guarding"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_hmym6"]
states/Crouch/node = SubResource("AnimationNodeAnimation_df755")
states/Crouch/position = Vector2(533, 109)
states/End/position = Vector2(937, 206)
states/Flutter/node = SubResource("AnimationNodeAnimation_5d1hf")
states/Flutter/position = Vector2(277, 309)
states/Grab/node = SubResource("AnimationNodeAnimation_pdlhp")
states/Grab/position = Vector2(307, 100)
states/Guard/node = SubResource("AnimationNodeAnimation_1crr2")
states/Guard/position = Vector2(665, 403)
states/Idle/node = SubResource("AnimationNodeAnimation_fmmdf")
states/Idle/position = Vector2(342, 206)
states/Jump/node = SubResource("AnimationNodeAnimation_owrdw")
states/Jump/position = Vector2(406, 309)
states/Start/position = Vector2(202, 206)
states/Walk/node = SubResource("AnimationNodeAnimation_7w07r")
states/Walk/position = Vector2(473, 206)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_fb8y7"), "Idle", "Walk", SubResource("AnimationNodeStateMachineTransition_b12uv"), "Walk", "Idle", SubResource("AnimationNodeStateMachineTransition_xjab4"), "Idle", "Grab", SubResource("AnimationNodeStateMachineTransition_5kqia"), "Grab", "Idle", SubResource("AnimationNodeStateMachineTransition_uc2tw"), "Walk", "Grab", SubResource("AnimationNodeStateMachineTransition_6kt2q"), "Grab", "Walk", SubResource("AnimationNodeStateMachineTransition_fjeki"), "Jump", "Flutter", SubResource("AnimationNodeStateMachineTransition_4jfp8"), "Walk", "Jump", SubResource("AnimationNodeStateMachineTransition_bhmlc"), "Flutter", "Idle", SubResource("AnimationNodeStateMachineTransition_0nnf1"), "Flutter", "Walk", SubResource("AnimationNodeStateMachineTransition_ahdbi"), "Idle", "Crouch", SubResource("AnimationNodeStateMachineTransition_vcl7x"), "Walk", "Crouch", SubResource("AnimationNodeStateMachineTransition_bylqf"), "Crouch", "Idle", SubResource("AnimationNodeStateMachineTransition_ohols"), "Crouch", "Walk", SubResource("AnimationNodeStateMachineTransition_hiwtq"), "Walk", "Guard", SubResource("AnimationNodeStateMachineTransition_6s5jw"), "Idle", "Guard", SubResource("AnimationNodeStateMachineTransition_26i6v"), "Guard", "Walk", SubResource("AnimationNodeStateMachineTransition_mqjqs"), "Guard", "Idle", SubResource("AnimationNodeStateMachineTransition_ldc2f")]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6y1cp"]
size = Vector2(6, 14)

[node name="Rin" groups=["Rin"] instance=ExtResource("1_voviw")]
collision_mask = 2
mass = 0.8
physics_material_override = SubResource("PhysicsMaterial_q86cr")
gravity_scale = 0.8
script = ExtResource("2_f2mt2")
run_speed = 1500.0
max_air_speed = 75.0
jump_height = 250

[node name="BodyHitbox" parent="." index="0"]
position = Vector2(0, 0)
shape = SubResource("RectangleShape2D_wjjwv")

[node name="Sprite" parent="." index="1"]
position = Vector2(0, 1)
scale = Vector2(0.3, 0.3)
texture = ExtResource("3_jm4h2")
hframes = 29

[node name="RinAnimPlayer" parent="." index="2" instance=ExtResource("4_lxsc4")]
root_node = NodePath("../Sprite")

[node name="AnimationTree" type="AnimationTree" parent="." index="3"]
tree_root = SubResource("AnimationNodeStateMachine_hmym6")
anim_player = NodePath("../RinAnimPlayer")
active = true
parameters/conditions/grab = false
parameters/conditions/is_crouching = false
parameters/conditions/is_guarding = false
parameters/conditions/is_idle = false
parameters/conditions/is_not_crouched = false
parameters/conditions/is_not_crouching = false
parameters/conditions/is_not_guarding = false
parameters/conditions/is_walking = false
parameters/conditions/jump = false

[node name="Portals" type="Node2D" parent="." index="4"]

[node name="Portal" parent="Portals" index="0" instance=ExtResource("5_i85mh")]
position = Vector2(0, 10)

[node name="Portal2" parent="Portals" index="1" instance=ExtResource("5_i85mh")]
visible = false
position = Vector2(0, 10)
id = 1

[node name="Portal3" parent="Portals" index="2" instance=ExtResource("5_i85mh")]
visible = false
position = Vector2(0, 10)
id = 2

[node name="Portal4" parent="Portals" index="3" instance=ExtResource("5_i85mh")]
visible = false
position = Vector2(0, 10)
id = 3

[node name="Portal5" parent="Portals" index="4" instance=ExtResource("5_i85mh")]
visible = false
position = Vector2(0, 10)
id = 4

[node name="Swords" type="Node2D" parent="." index="5"]

[node name="Grabbox" parent="." index="6"]
position = Vector2(6, 1)
up_traj = Vector2(0, -250)
left_traj = Vector2(-250, -100)
down_traj = Vector2(0, 100)
right_traj = Vector2(250, -100)

[node name="CollisionShape2D" parent="Grabbox" index="0"]
shape = SubResource("RectangleShape2D_6y1cp")

[node name="SwordTimers" type="Node2D" parent="." index="7"]

[node name="Timer1" type="Timer" parent="SwordTimers" index="0"]
one_shot = true

[node name="Timer2" type="Timer" parent="SwordTimers" index="1"]
one_shot = true

[node name="Timer3" type="Timer" parent="SwordTimers" index="2"]
one_shot = true

[node name="Timer4" type="Timer" parent="SwordTimers" index="3"]
one_shot = true

[node name="Timer5" type="Timer" parent="SwordTimers" index="4"]
one_shot = true

[node name="Timer6" type="Timer" parent="SwordTimers" index="5"]
one_shot = true

[node name="Timer7" type="Timer" parent="SwordTimers" index="6"]
one_shot = true

[node name="Timer8" type="Timer" parent="SwordTimers" index="7"]
one_shot = true

[node name="AttackTimers" type="Node2D" parent="." index="8"]

[node name="HeavyTimer" type="Timer" parent="AttackTimers" index="0"]
one_shot = true

[node name="PortalRecallTimer" type="Timer" parent="AttackTimers" index="1"]
one_shot = true

[node name="Label" type="Label" parent="." index="9"]
offset_left = -7.0
offset_top = -24.0
offset_right = 20.0
offset_bottom = 2.0
scale = Vector2(0.5, 0.5)
text = "S: 1"

[node name="Label2" type="Label" parent="." index="10"]
offset_left = -7.0
offset_top = -33.0
offset_right = 21.0
offset_bottom = -7.0
scale = Vector2(0.5, 0.5)
text = "P: 1"

[node name="FloorChecker" parent="." index="11"]
target_position = Vector2(0, 10)

[node name="InputTimer" parent="." index="12"]
one_shot = true

[connection signal="timeout" from="AttackTimers/HeavyTimer" to="." method="_on_heavy_timer_timeout"]
[connection signal="timeout" from="AttackTimers/PortalRecallTimer" to="." method="_on_portal_recall_timer_timeout"]

[editable path="Grabbox"]
